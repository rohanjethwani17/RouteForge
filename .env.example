# RouteForge Environment Configuration
# Copy this to .env and adjust values as needed
# Precedence: env vars > application.yml defaults

# =============================================================================
# SERVICE PORTS
# =============================================================================
API_PORT=8082                 # API Gateway main port
INGESTION_PORT=8083           # Ingestion service port
PROCESSING_PORT=8084          # Processing service port

# =============================================================================
# GTFS-REALTIME INGESTION
# =============================================================================
# NYC MTA GTFS-RT Vehicle Positions feed (no API key required)
GTFS_RT_FEED_URL=https://api-endpoint.mta.info/Dataservice/mtagtfsfeeds/nyct%2Fgtfs
GTFS_RT_POLL_INTERVAL_SEC=5   # Polling frequency (seconds)
GTFS_RT_TIMEOUT_SEC=10        # HTTP timeout for feed fetch

# =============================================================================
# KAFKA (Event Streaming)
# =============================================================================
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_TOPIC_VEHICLE_POSITIONS=vehicle_positions
KAFKA_TOPIC_DLQ=vehicle_positions.dlq
KAFKA_CONSUMER_GROUP=processing-service-group

# =============================================================================
# REDIS (Hot Cache)
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=                # Leave empty for local dev
REDIS_TTL_SEC=300              # Cache TTL (5 minutes)

# =============================================================================
# POSTGRESQL (Historical Data)
# =============================================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=routeforge
POSTGRES_USER=routeforge
POSTGRES_PASSWORD=routeforge123
POSTGRES_JDBC_URL=jdbc:postgresql://localhost:5432/routeforge

# =============================================================================
# OAUTH2 / KEYCLOAK (Authentication)
# =============================================================================
KEYCLOAK_REALM=routeforge
KEYCLOAK_AUTH_SERVER_URL=http://localhost:8080
KEYCLOAK_CLIENT_ID=routeforge-api
KEYCLOAK_CLIENT_SECRET=routeforge-secret
JWT_ISSUER_URI=http://localhost:8080/realms/routeforge

# =============================================================================
# API GATEWAY (Rate Limiting)
# =============================================================================
API_RATE_LIMIT_CAPACITY=100            # Max requests in window
API_RATE_LIMIT_REFILL_TOKENS=100      # Tokens to refill
API_RATE_LIMIT_REFILL_DURATION_SEC=60 # Refill window (60s = 100 req/min)

# =============================================================================
# OBSERVABILITY
# =============================================================================
PROMETHEUS_ENABLED=true

# =============================================================================
# INTER-SERVICE COMMUNICATION
# =============================================================================
PROCESSING_SERVICE_URL=http://localhost:8084

# =============================================================================
# SPRING PROFILES
# =============================================================================
# Use 'dev' for development (no auth), 'prod' for production (OAuth2 required)
SPRING_PROFILES_ACTIVE=dev

# =============================================================================
# JAVA / JVM OPTIONS (Optional)
# =============================================================================
# JAVA_OPTS=-Xms512m -Xmx2g -XX:+UseG1GC

# =============================================================================
# LOGGING (Optional)
# =============================================================================
# LOGGING_LEVEL_ROOT=INFO
# LOGGING_LEVEL_COM_ROUTEFORGE=DEBUG

# =============================================================================
# DATABASE TUNING (Optional)
# =============================================================================
# SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE=10
# SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE=5
# SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT=30000

# =============================================================================
# KAFKA TUNING (Optional)
# =============================================================================
# KAFKA_CONSUMER_MAX_POLL_RECORDS=500
# KAFKA_CONSUMER_FETCH_MIN_BYTES=1024
# KAFKA_LISTENER_CONCURRENCY=3
